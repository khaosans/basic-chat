============================= test session starts ==============================
platform darwin -- Python 3.11.9, pytest-8.4.1, pluggy-1.6.0 -- /Users/Sour/.pyenv/versions/3.11.9/bin/python3.11
cachedir: .pytest_cache
rootdir: /Users/Sour/github/basic-chat-template
configfile: pytest.ini
plugins: anyio-4.9.0, cov-6.2.1, langsmith-0.3.45, asyncio-1.0.0
asyncio: mode=Mode.STRICT, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 168 items

tests/test_app.py::test_document_processor_init PASSED                   [  0%]
tests/test_app.py::test_mime_type_detection PASSED                       [  1%]
tests/test_app.py::test_ollama_chat_initialization PASSED                [  1%]
tests/test_app.py::test_chat_query_structure PASSED                      [  2%]
tests/test_app.py::test_error_handling PASSED                            [  2%]
tests/test_app.py::test_async_chat PASSED                                [  3%]
tests/test_app.py::test_chat_fallback_mechanism PASSED                   [  4%]
tests/test_app.py::test_health_check PASSED                              [  4%]
tests/test_app.py::test_cache_stats PASSED                               [  5%]
tests/test_app.py::test_stream_query PASSED                              [  5%]
tests/test_app.py::test_config_integration PASSED                        [  6%]
tests/test_app.py::test_async_chat_integration PASSED                    [  7%]
tests/test_app.py::test_cache_integration PASSED                         [  7%]
tests/test_basic.py::TestBasicFunctionality::test_ollamachat_initialization PASSED [  8%]
tests/test_basic.py::TestConfiguration::test_app_config_defaults PASSED  [  8%]
tests/test_basic.py::TestConfiguration::test_app_config_validation PASSED [  9%]
tests/test_basic.py::TestConfiguration::test_global_config_exists PASSED [ 10%]
tests/test_basic.py::TestCaching::test_global_cache_exists PASSED        [ 10%]
tests/test_basic.py::TestCaching::test_memory_cache_basic PASSED         [ 11%]
tests/test_basic.py::TestCaching::test_response_cache_basic PASSED       [ 11%]
tests/test_database_migrations.py::TestMigration::test_migration_creation PASSED [ 12%]
tests/test_database_migrations.py::TestMigrationManager::test_migration_manager_initialization PASSED [ 13%]
tests/test_database_migrations.py::TestMigrationManager::test_calculate_checksum PASSED [ 13%]
tests/test_database_migrations.py::TestMigrationManager::test_parse_migration_file PASSED [ 14%]
tests/test_database_migrations.py::TestMigrationManager::test_parse_invalid_migration_file PASSED [ 14%]
tests/test_database_migrations.py::TestMigrationManager::test_get_migration_files PASSED [ 15%]
tests/test_database_migrations.py::TestMigrationManager::test_apply_migration PASSED [ 16%]
tests/test_database_migrations.py::TestMigrationManager::test_apply_failed_migration PASSED [ 16%]
tests/test_database_migrations.py::TestMigrationManager::test_validate_migration PASSED [ 17%]
tests/test_database_migrations.py::TestMigrationManager::test_migrate_empty_database PASSED [ 17%]
tests/test_database_migrations.py::TestMigrationManager::test_migrate_with_files PASSED [ 18%]
tests/test_database_migrations.py::TestMigrationManager::test_migrate_with_existing_migrations PASSED [ 19%]
tests/test_database_migrations.py::TestMigrationManager::test_get_migration_status PASSED [ 19%]
tests/test_database_migrations.py::TestMigrationManager::test_create_migration PASSED [ 20%]
tests/test_database_migrations.py::TestMigrationManager::test_create_duplicate_migration PASSED [ 20%]
tests/test_database_migrations.py::TestMigrationIntegration::test_full_migration_workflow PASSED [ 21%]
tests/test_database_migrations.py::TestMigrationIntegration::test_migration_rollback_simulation PASSED [ 22%]
tests/test_database_migrations.py::TestGlobalFunctions::test_initialize_migrations PASSED [ 22%]
tests/test_database_migrations.py::TestGlobalFunctions::test_run_migrations FAILED [ 23%]
tests/test_database_migrations.py::TestGlobalFunctions::test_get_migration_status PASSED [ 23%]
tests/test_enhanced_audio.py::TestEnhancedAudioFunctionality::test_create_enhanced_audio_button_initialization PASSED [ 24%]
tests/test_enhanced_audio.py::TestEnhancedAudioFunctionality::test_get_professional_audio_html_creates_valid_html PASSED [ 25%]
tests/test_enhanced_audio.py::TestEnhancedAudioFunctionality::test_get_professional_audio_html_file_not_found PASSED [ 25%]
tests/test_enhanced_audio.py::TestEnhancedAudioFunctionality::test_get_professional_audio_html_none_file PASSED [ 26%]
tests/test_enhanced_audio.py::TestEnhancedAudioFunctionality::test_get_professional_audio_html_empty_string PASSED [ 26%]
tests/test_enhanced_audio.py::TestEnhancedAudioFunctionality::test_get_audio_file_size_bytes PASSED [ 27%]
tests/test_enhanced_audio.py::TestEnhancedAudioFunctionality::test_get_audio_file_size_kilobytes PASSED [ 27%]
tests/test_enhanced_audio.py::TestEnhancedAudioFunctionality::test_get_audio_file_size_megabytes PASSED [ 28%]
tests/test_enhanced_audio.py::TestEnhancedAudioFunctionality::test_get_audio_file_size_nonexistent PASSED [ 29%]
tests/test_enhanced_audio.py::TestEnhancedAudioFunctionality::test_cleanup_audio_files PASSED [ 29%]
tests/test_enhanced_audio.py::TestEnhancedAudioFunctionality::test_professional_audio_html_contains_modern_styling PASSED [ 30%]
tests/test_enhanced_audio.py::TestEnhancedAudioFunctionality::test_professional_audio_html_contains_accessibility_features PASSED [ 30%]
tests/test_enhanced_audio.py::TestEnhancedAudioFunctionality::test_professional_audio_html_error_handling PASSED [ 31%]
tests/test_enhanced_audio.py::TestEnhancedAudioFunctionality::test_professional_audio_html_base64_encoding PASSED [ 32%]
tests/test_enhanced_audio.py::TestEnhancedAudioFunctionality::test_professional_audio_html_file_size_display PASSED [ 32%]
tests/test_enhanced_audio.py::TestEnhancedAudioFunctionality::test_professional_audio_html_malformed_file PASSED [ 33%]
tests/test_enhanced_reasoning.py::TestEnhancedReasoningAgent::test_enhanced_calculator_tool PASSED [ 33%]
tests/test_enhanced_reasoning.py::TestEnhancedReasoningAgent::test_enhanced_time_tools PASSED [ 34%]
tests/test_enhanced_reasoning.py::TestEnhancedReasoningAgent::test_time_conversion_tool PASSED [ 35%]
tests/test_enhanced_reasoning.py::TestEnhancedReasoningAgent::test_time_difference_tool PASSED [ 35%]
tests/test_enhanced_reasoning.py::TestEnhancedReasoningAgent::test_time_info_tool PASSED [ 36%]
tests/test_enhanced_reasoning.py::TestEnhancedReasoningAgent::test_agent_tools_initialization PASSED [ 36%]
tests/test_enhanced_reasoning.py::TestEnhancedReasoningAgent::test_enhanced_calculator_safety PASSED [ 37%]
tests/test_enhanced_reasoning.py::TestEnhancedReasoningAgent::test_enhanced_calculator_advanced_functions PASSED [ 38%]
tests/test_enhanced_reasoning.py::TestEnhancedReasoningAgent::test_timezone_handling PASSED [ 38%]
tests/test_enhanced_reasoning.py::TestEnhancedReasoningAgent::test_time_conversion_edge_cases PASSED [ 39%]
tests/test_enhanced_reasoning.py::TestEnhancedReasoningAgent::test_time_difference_edge_cases PASSED [ 39%]
tests/test_enhanced_reasoning.py::TestEnhancedReasoningAgent::test_agent_run_with_enhanced_tools PASSED [ 40%]
tests/test_enhanced_reasoning.py::TestEnhancedReasoningAgent::test_tool_descriptions PASSED [ 41%]
tests/test_enhanced_reasoning.py::TestEnhancedReasoningAgent::test_error_handling_integration PASSED [ 41%]
tests/test_enhanced_reasoning.py::TestEnhancedToolsIntegration::test_calculator_integration_with_agent PASSED [ 42%]
tests/test_enhanced_reasoning.py::TestEnhancedToolsIntegration::test_time_tools_integration_with_agent PASSED [ 42%]
tests/test_enhanced_reasoning.py::TestEnhancedToolsIntegration::test_tool_consistency PASSED [ 43%]
tests/test_enhanced_reasoning.py::TestEnhancedToolsIntegration::test_tool_performance PASSED [ 44%]
tests/test_enhanced_reasoning.py::test_enhanced_tools_backward_compatibility PASSED [ 44%]
tests/test_enhanced_reasoning.py::test_enhanced_tools_error_recovery PASSED [ 45%]
tests/test_enhanced_tools.py::TestEnhancedCalculator::test_basic_arithmetic PASSED [ 45%]
tests/test_enhanced_tools.py::TestEnhancedCalculator::test_mathematical_functions PASSED [ 46%]
tests/test_enhanced_tools.py::TestEnhancedCalculator::test_trigonometric_functions PASSED [ 47%]
tests/test_enhanced_tools.py::TestEnhancedCalculator::test_logarithmic_functions FAILED [ 47%]
tests/test_enhanced_tools.py::TestEnhancedCalculator::test_constants FAILED [ 48%]
tests/test_enhanced_tools.py::TestEnhancedCalculator::test_complex_expressions PASSED [ 48%]
tests/test_enhanced_tools.py::TestEnhancedCalculator::test_expression_cleaning PASSED [ 49%]
tests/test_enhanced_tools.py::TestEnhancedCalculator::test_error_handling PASSED [ 50%]
tests/test_enhanced_tools.py::TestEnhancedCalculator::test_safety_validation PASSED [ 50%]
tests/test_enhanced_tools.py::TestEnhancedCalculator::test_result_formatting PASSED [ 51%]
tests/test_enhanced_tools.py::TestEnhancedTimeTools::test_get_current_time_utc PASSED [ 51%]
tests/test_enhanced_tools.py::TestEnhancedTimeTools::test_get_current_time_different_timezones PASSED [ 52%]
tests/test_enhanced_tools.py::TestEnhancedTimeTools::test_timezone_normalization PASSED [ 52%]
tests/test_enhanced_tools.py::TestEnhancedTimeTools::test_time_conversion PASSED [ 53%]
tests/test_enhanced_tools.py::TestEnhancedTimeTools::test_time_difference_calculation PASSED [ 54%]
tests/test_enhanced_tools.py::TestEnhancedTimeTools::test_time_info_comprehensive PASSED [ 54%]
tests/test_enhanced_tools.py::TestEnhancedTimeTools::test_available_timezones PASSED [ 55%]
tests/test_enhanced_tools.py::TestEnhancedTimeTools::test_error_handling_invalid_timezone PASSED [ 55%]
tests/test_enhanced_tools.py::TestEnhancedTimeTools::test_error_handling_invalid_time_format PASSED [ 56%]
tests/test_enhanced_tools.py::TestEnhancedTimeTools::test_error_handling_invalid_timezone_conversion PASSED [ 57%]
tests/test_enhanced_tools.py::TestEnhancedTimeTools::test_pytz_import_error_handling PASSED [ 57%]
tests/test_enhanced_tools.py::TestIntegration::test_calculator_and_time_integration FAILED [ 58%]
tests/test_enhanced_tools.py::TestIntegration::test_complex_calculation_with_time FAILED [ 58%]
tests/test_enhanced_tools.py::test_tool_initialization[EnhancedCalculator] PASSED [ 59%]
tests/test_enhanced_tools.py::test_tool_initialization[EnhancedTimeTools] PASSED [ 60%]
tests/test_enhanced_tools.py::test_calculation_result_dataclass PASSED   [ 60%]
tests/test_enhanced_tools.py::test_time_result_dataclass PASSED          [ 61%]
tests/test_processing.py::test_document_processor_initialization PASSED  [ 61%]
tests/test_processing.py::test_text_splitting PASSED                     [ 62%]
tests/test_processing.py::test_empty_document_handling PASSED            [ 63%]
tests/test_processing.py::test_document_metadata_handling PASSED         [ 63%]
tests/test_processing.py::test_async_processing PASSED                   [ 64%]
tests/test_reasoning.py::test_reasoning_result_creation PASSED           [ 64%]
tests/test_reasoning.py::test_chain_of_thought PASSED                    [ 65%]
tests/test_reasoning.py::test_multi_step_reasoning PASSED                [ 66%]
tests/test_reasoning.py::test_agent_based_reasoning PASSED               [ 66%]
tests/test_reasoning.py::test_error_handling PASSED                      [ 67%]
tests/test_reasoning.py::test_reasoning_components[ReasoningChain] PASSED [ 67%]
tests/test_reasoning.py::test_reasoning_components[<lambda>] 